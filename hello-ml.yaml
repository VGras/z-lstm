# Workflow API version
ZapOSApiVersion: v1alpha1

# Declares this as workflow
kind: Workflow

# List resources needed by workflow.
resources:

# A resource named `welcome` that is a public git repo. All the fields here are required except branch, which defaults to master.
- name: hello
  type: git
  parameters:
    url: "git@github.com:zapatacomputing/tutorial-2-hello-ml.git"
    branch: "master"

# Data to help you easily work with your workflow
metadata:

  # Prefix for workflow ID
  generateName: hello-ml-

# Data for running the workflow
spec:

  # Think of this as identifying the `main` function -- this tells the workflow which template to start with
  entrypoint: hello

  # Initializing global variables for use in workflow
  arguments:
    parameters:

    # Where output data is stored -- Must be `quantum-engine` for compatibility with Orquestra data services
    - s3-bucket: quantum-engine
    # Path where output data is stored within the `s3-bucket` -- can be anything you want
    - s3-key: tutorials/hello-ml/

  # The steps of the workflow
  templates:

  # `hello` is a template that just contains a list of `steps`, which are other templates
  - name: hello
    steps:

    # This template runs the `make-data` template in the `hello` resource
    - - name: test-np-and-pd
        template: make-data
        arguments:
          parameters:
          - resources: [hello]
          - numsamples: 2